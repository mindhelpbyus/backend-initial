{
 "Description": "Telehealth Backend Infrastructure - DEV environment",
 "Resources": {
  "PatientsTable087EEB9B": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "patientId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "email",
      "AttributeType": "S"
     },
     {
      "AttributeName": "createdAt",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "email-index",
      "KeySchema": [
       {
        "AttributeName": "email",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "createdAt",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "patientId",
      "KeyType": "HASH"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "PatientsTable",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "TelehealthBackend"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/PatientsTable/Resource"
   }
  },
  "DoctorsTable4E450B5B": {
   "Type": "AWS::DynamoDB::Table",
   "Properties": {
    "AttributeDefinitions": [
     {
      "AttributeName": "doctorId",
      "AttributeType": "S"
     },
     {
      "AttributeName": "email",
      "AttributeType": "S"
     },
     {
      "AttributeName": "createdAt",
      "AttributeType": "S"
     },
     {
      "AttributeName": "specialization",
      "AttributeType": "S"
     }
    ],
    "BillingMode": "PAY_PER_REQUEST",
    "GlobalSecondaryIndexes": [
     {
      "IndexName": "email-index",
      "KeySchema": [
       {
        "AttributeName": "email",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "createdAt",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     },
     {
      "IndexName": "specialization-index",
      "KeySchema": [
       {
        "AttributeName": "specialization",
        "KeyType": "HASH"
       },
       {
        "AttributeName": "createdAt",
        "KeyType": "RANGE"
       }
      ],
      "Projection": {
       "ProjectionType": "ALL"
      }
     }
    ],
    "KeySchema": [
     {
      "AttributeName": "doctorId",
      "KeyType": "HASH"
     }
    ],
    "PointInTimeRecoverySpecification": {
     "PointInTimeRecoveryEnabled": true
    },
    "TableName": "DoctorsTable",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "TelehealthBackend"
     }
    ]
   },
   "UpdateReplacePolicy": "Delete",
   "DeletionPolicy": "Delete",
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/DoctorsTable/Resource"
   }
  },
  "LambdaExecutionRoleD5C26073": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ],
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "TelehealthBackend"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/LambdaExecutionRole/Resource"
   }
  },
  "LambdaExecutionRoleDefaultPolicy6D69732F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "PatientsTable087EEB9B",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "PatientsTable087EEB9B",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "dynamodb:BatchGetItem",
        "dynamodb:GetRecords",
        "dynamodb:GetShardIterator",
        "dynamodb:Query",
        "dynamodb:GetItem",
        "dynamodb:Scan",
        "dynamodb:ConditionCheckItem",
        "dynamodb:BatchWriteItem",
        "dynamodb:PutItem",
        "dynamodb:UpdateItem",
        "dynamodb:DeleteItem",
        "dynamodb:DescribeTable"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::GetAtt": [
          "DoctorsTable4E450B5B",
          "Arn"
         ]
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::GetAtt": [
             "DoctorsTable4E450B5B",
             "Arn"
            ]
           },
           "/index/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "LambdaExecutionRoleDefaultPolicy6D69732F",
    "Roles": [
     {
      "Ref": "LambdaExecutionRoleD5C26073"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/LambdaExecutionRole/DefaultPolicy/Resource"
   }
  },
  "PatientsLambda2BB68394": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-000000000000-us-east-1",
     "S3Key": "56c6adf6c66d688fb3d8908972d4c30941f9acf4c88b09468d8f7ff61b1df2db.zip"
    },
    "Environment": {
     "Variables": {
      "PATIENTS_TABLE": {
       "Ref": "PatientsTable087EEB9B"
      },
      "JWT_SECRET": "your-super-secret-jwt-key-change-in-production",
      "REGION": "us-east-1"
     }
    },
    "Handler": "dist/handler.handler",
    "Role": {
     "Fn::GetAtt": [
      "LambdaExecutionRoleD5C26073",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "TelehealthBackend"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "LambdaExecutionRoleDefaultPolicy6D69732F",
    "LambdaExecutionRoleD5C26073"
   ],
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/PatientsLambda/Resource",
    "aws:asset:path": "asset.56c6adf6c66d688fb3d8908972d4c30941f9acf4c88b09468d8f7ff61b1df2db",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "DoctorsLambda94A0C7B8": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-000000000000-us-east-1",
     "S3Key": "05dc655bc4d622ba2500fe79814af442325ea29631dd2b17fb4e2cc521e9556a.zip"
    },
    "Environment": {
     "Variables": {
      "DOCTORS_TABLE": {
       "Ref": "DoctorsTable4E450B5B"
      },
      "JWT_SECRET": "your-super-secret-jwt-key-change-in-production",
      "REGION": "us-east-1"
     }
    },
    "Handler": "dist/handler.handler",
    "Role": {
     "Fn::GetAtt": [
      "LambdaExecutionRoleD5C26073",
      "Arn"
     ]
    },
    "Runtime": "nodejs18.x",
    "Tags": [
     {
      "Key": "Environment",
      "Value": "dev"
     },
     {
      "Key": "ManagedBy",
      "Value": "CDK"
     },
     {
      "Key": "Project",
      "Value": "TelehealthBackend"
     }
    ],
    "Timeout": 30
   },
   "DependsOn": [
    "LambdaExecutionRoleDefaultPolicy6D69732F",
    "LambdaExecutionRoleD5C26073"
   ],
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/DoctorsLambda/Resource",
    "aws:asset:path": "asset.05dc655bc4d622ba2500fe79814af442325ea29631dd2b17fb4e2cc521e9556a",
    "aws:asset:is-bundled": false,
    "aws:asset:property": "Code"
   }
  },
  "TelehealthAPIAC6B8BC4": {
   "Type": "AWS::ApiGatewayV2::Api",
   "Properties": {
    "CorsConfiguration": {
     "AllowHeaders": [
      "Content-Type",
      "Authorization"
     ],
     "AllowMethods": [
      "GET",
      "POST",
      "PUT",
      "DELETE"
     ],
     "AllowOrigins": [
      "*"
     ]
    },
    "Name": "TelehealthAPI",
    "ProtocolType": "HTTP",
    "Tags": {
     "Environment": "dev",
     "ManagedBy": "CDK",
     "Project": "TelehealthBackend"
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/Resource"
   }
  },
  "TelehealthAPIDefaultStageF7A53370": {
   "Type": "AWS::ApiGatewayV2::Stage",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AutoDeploy": true,
    "StageName": "$default",
    "Tags": {
     "Environment": "dev",
     "ManagedBy": "CDK",
     "Project": "TelehealthBackend"
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/DefaultStage/Resource"
   }
  },
  "TelehealthAPIPOSTauthsignupPatientsIntegration3C6C1C21": {
   "Type": "AWS::ApiGatewayV2::Integration",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "IntegrationType": "AWS_PROXY",
    "IntegrationUri": {
     "Fn::GetAtt": [
      "PatientsLambda2BB68394",
      "Arn"
     ]
    },
    "PayloadFormatVersion": "2.0"
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/POST--auth--signup/PatientsIntegration/Resource"
   }
  },
  "TelehealthAPIPOSTauthsignupPatientsIntegrationPermission067794A0": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PatientsLambda2BB68394",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/auth/signup"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/POST--auth--signup/PatientsIntegration-Permission"
   }
  },
  "TelehealthAPIPOSTauthsignup374780C4": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "POST /auth/signup",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIPOSTauthsignupPatientsIntegration3C6C1C21"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/POST--auth--signup/Resource"
   }
  },
  "TelehealthAPIPOSTauthloginPatientsIntegrationPermission77AB1B4C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PatientsLambda2BB68394",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/auth/login"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/POST--auth--login/PatientsIntegration-Permission"
   }
  },
  "TelehealthAPIPOSTauthloginF245CE10": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "POST /auth/login",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIPOSTauthsignupPatientsIntegration3C6C1C21"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/POST--auth--login/Resource"
   }
  },
  "TelehealthAPIGETpatientsPatientsIntegrationPermission48D48FC4": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PatientsLambda2BB68394",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/patients"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--patients/PatientsIntegration-Permission"
   }
  },
  "TelehealthAPIGETpatients2E8B16B2": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "GET /patients",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIPOSTauthsignupPatientsIntegration3C6C1C21"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--patients/Resource"
   }
  },
  "TelehealthAPIPOSTpatientsPatientsIntegrationPermissionD5E5A9A7": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PatientsLambda2BB68394",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/patients"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/POST--patients/PatientsIntegration-Permission"
   }
  },
  "TelehealthAPIPOSTpatientsE92B70DC": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "POST /patients",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIPOSTauthsignupPatientsIntegration3C6C1C21"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/POST--patients/Resource"
   }
  },
  "TelehealthAPIGETpatientspatientIdPatientsIntegrationPermissionB1553F19": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PatientsLambda2BB68394",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/patients/{patientId}"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--patients--{patientId}/PatientsIntegration-Permission"
   }
  },
  "TelehealthAPIGETpatientspatientIdFDA14F6E": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "GET /patients/{patientId}",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIPOSTauthsignupPatientsIntegration3C6C1C21"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--patients--{patientId}/Resource"
   }
  },
  "TelehealthAPIPUTpatientspatientIdPatientsIntegrationPermission1CB54A90": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PatientsLambda2BB68394",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/patients/{patientId}"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/PUT--patients--{patientId}/PatientsIntegration-Permission"
   }
  },
  "TelehealthAPIPUTpatientspatientId0E7F7D5A": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "PUT /patients/{patientId}",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIPOSTauthsignupPatientsIntegration3C6C1C21"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/PUT--patients--{patientId}/Resource"
   }
  },
  "TelehealthAPIDELETEpatientspatientIdPatientsIntegrationPermissionA6D5840C": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PatientsLambda2BB68394",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/patients/{patientId}"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/DELETE--patients--{patientId}/PatientsIntegration-Permission"
   }
  },
  "TelehealthAPIDELETEpatientspatientId31F4BF5E": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "DELETE /patients/{patientId}",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIPOSTauthsignupPatientsIntegration3C6C1C21"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/DELETE--patients--{patientId}/Resource"
   }
  },
  "TelehealthAPIGETpatientsbyemailPatientsIntegrationPermission1BC90B10": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PatientsLambda2BB68394",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/patients/by-email"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--patients--by-email/PatientsIntegration-Permission"
   }
  },
  "TelehealthAPIGETpatientsbyemail999EE7CA": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "GET /patients/by-email",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIPOSTauthsignupPatientsIntegration3C6C1C21"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--patients--by-email/Resource"
   }
  },
  "TelehealthAPIGETpatientspatientIdvisitsPatientsIntegrationPermissionBFEFB8BA": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PatientsLambda2BB68394",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/patients/{patientId}/visits"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--patients--{patientId}--visits/PatientsIntegration-Permission"
   }
  },
  "TelehealthAPIGETpatientspatientIdvisits8358F720": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "GET /patients/{patientId}/visits",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIPOSTauthsignupPatientsIntegration3C6C1C21"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--patients--{patientId}--visits/Resource"
   }
  },
  "TelehealthAPIPOSTpatientspatientIdreviewsPatientsIntegrationPermission127BE2B0": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "PatientsLambda2BB68394",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/patients/{patientId}/reviews"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/POST--patients--{patientId}--reviews/PatientsIntegration-Permission"
   }
  },
  "TelehealthAPIPOSTpatientspatientIdreviewsDD4DE915": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "POST /patients/{patientId}/reviews",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIPOSTauthsignupPatientsIntegration3C6C1C21"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/POST--patients--{patientId}--reviews/Resource"
   }
  },
  "TelehealthAPIGETdoctorsDoctorsIntegration7B9D9E0C": {
   "Type": "AWS::ApiGatewayV2::Integration",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "IntegrationType": "AWS_PROXY",
    "IntegrationUri": {
     "Fn::GetAtt": [
      "DoctorsLambda94A0C7B8",
      "Arn"
     ]
    },
    "PayloadFormatVersion": "2.0"
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--doctors/DoctorsIntegration/Resource"
   }
  },
  "TelehealthAPIGETdoctorsDoctorsIntegrationPermission53956C05": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DoctorsLambda94A0C7B8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/doctors"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--doctors/DoctorsIntegration-Permission"
   }
  },
  "TelehealthAPIGETdoctors396224BB": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "GET /doctors",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIGETdoctorsDoctorsIntegration7B9D9E0C"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--doctors/Resource"
   }
  },
  "TelehealthAPIPOSTdoctorsDoctorsIntegrationPermission5C3079F8": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DoctorsLambda94A0C7B8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/doctors"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/POST--doctors/DoctorsIntegration-Permission"
   }
  },
  "TelehealthAPIPOSTdoctors34D75BF4": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "POST /doctors",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIGETdoctorsDoctorsIntegration7B9D9E0C"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/POST--doctors/Resource"
   }
  },
  "TelehealthAPIGETdoctorsdoctorIdDoctorsIntegrationPermission1BB34D03": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DoctorsLambda94A0C7B8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/doctors/{doctorId}"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--doctors--{doctorId}/DoctorsIntegration-Permission"
   }
  },
  "TelehealthAPIGETdoctorsdoctorIdF6F62AFE": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "GET /doctors/{doctorId}",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIGETdoctorsDoctorsIntegration7B9D9E0C"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--doctors--{doctorId}/Resource"
   }
  },
  "TelehealthAPIPUTdoctorsdoctorIdDoctorsIntegrationPermissionBFFD3A94": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DoctorsLambda94A0C7B8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/doctors/{doctorId}"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/PUT--doctors--{doctorId}/DoctorsIntegration-Permission"
   }
  },
  "TelehealthAPIPUTdoctorsdoctorId6E775068": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "PUT /doctors/{doctorId}",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIGETdoctorsDoctorsIntegration7B9D9E0C"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/PUT--doctors--{doctorId}/Resource"
   }
  },
  "TelehealthAPIDELETEdoctorsdoctorIdDoctorsIntegrationPermission9EF5FF93": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DoctorsLambda94A0C7B8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/doctors/{doctorId}"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/DELETE--doctors--{doctorId}/DoctorsIntegration-Permission"
   }
  },
  "TelehealthAPIDELETEdoctorsdoctorIdC9578E82": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "DELETE /doctors/{doctorId}",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIGETdoctorsDoctorsIntegration7B9D9E0C"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/DELETE--doctors--{doctorId}/Resource"
   }
  },
  "TelehealthAPIGETdoctorsbyemailDoctorsIntegrationPermission9F6B4470": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DoctorsLambda94A0C7B8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/doctors/by-email"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--doctors--by-email/DoctorsIntegration-Permission"
   }
  },
  "TelehealthAPIGETdoctorsbyemail5A305ED6": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "GET /doctors/by-email",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIGETdoctorsDoctorsIntegration7B9D9E0C"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--doctors--by-email/Resource"
   }
  },
  "TelehealthAPIGETdoctorsbyspecializationDoctorsIntegrationPermissionC2CE6FD7": {
   "Type": "AWS::Lambda::Permission",
   "Properties": {
    "Action": "lambda:InvokeFunction",
    "FunctionName": {
     "Fn::GetAtt": [
      "DoctorsLambda94A0C7B8",
      "Arn"
     ]
    },
    "Principal": "apigateway.amazonaws.com",
    "SourceArn": {
     "Fn::Join": [
      "",
      [
       "arn:",
       {
        "Ref": "AWS::Partition"
       },
       ":execute-api:us-east-1:000000000000:",
       {
        "Ref": "TelehealthAPIAC6B8BC4"
       },
       "/*/*/doctors/by-specialization"
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--doctors--by-specialization/DoctorsIntegration-Permission"
   }
  },
  "TelehealthAPIGETdoctorsbyspecialization9223599F": {
   "Type": "AWS::ApiGatewayV2::Route",
   "Properties": {
    "ApiId": {
     "Ref": "TelehealthAPIAC6B8BC4"
    },
    "AuthorizationType": "NONE",
    "RouteKey": "GET /doctors/by-specialization",
    "Target": {
     "Fn::Join": [
      "",
      [
       "integrations/",
       {
        "Ref": "TelehealthAPIGETdoctorsDoctorsIntegration7B9D9E0C"
       }
      ]
     ]
    }
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/TelehealthAPI/GET--doctors--by-specialization/Resource"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/12OwW6EMAxEv2XvwS1w6Hm3UtWeitjeVyak1AskCDtFKMq/VyGqVPU0b+zR2BVUZQmPJ9y40P1YTNRBuArqUeHGt9DvFmfXdxA+sJuMev60B0RFOENoXZ4d2riJ9J5spqgmnLseIbx4q4WcTbu/3Jh1JmZyNiqub8hshOGcRHENF69HIxdko3ChAcVsuH9XEF5FlvNCqSJJslfB4XglQxq1zkumNytmWPH37D975GJUrWHnV23U8UDqITukwLuXxUtUzS5fzj7UUNbwdLozUbF6KzQbaLP+AKo+enJPAQAA"
   },
   "Metadata": {
    "aws:cdk:path": "TelehealthBackend-dev/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "ApiUrl": {
   "Value": {
    "Fn::Join": [
     "",
     [
      "https://",
      {
       "Ref": "TelehealthAPIAC6B8BC4"
      },
      ".execute-api.us-east-1.",
      {
       "Ref": "AWS::URLSuffix"
      },
      "/"
     ]
    ]
   }
  },
  "PatientsTableName": {
   "Value": {
    "Ref": "PatientsTable087EEB9B"
   }
  },
  "PatientsLambdaArn": {
   "Value": {
    "Fn::GetAtt": [
     "PatientsLambda2BB68394",
     "Arn"
    ]
   }
  },
  "DoctorsTableName": {
   "Value": {
    "Ref": "DoctorsTable4E450B5B"
   }
  },
  "DoctorsLambdaArn": {
   "Value": {
    "Fn::GetAtt": [
     "DoctorsLambda94A0C7B8",
     "Arn"
    ]
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}